From: Sipwise Development Team <support@sipwise.com>
Date: Mon, 4 Nov 2024 15:37:29 +0100
Subject: sipwise_vm_fix_envelope_play

---
 apps/app_voicemail.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/apps/app_voicemail.c b/apps/app_voicemail.c
index 0b78238..aabb725 100644
--- a/apps/app_voicemail.c
+++ b/apps/app_voicemail.c
@@ -12438,8 +12438,10 @@ static int vm_execmain(struct ast_channel *chan, const char *data)
 					}
 					cmd = 't';
 					break;
+				*/
 				case '3': // Envelope
 					if (vms.lastmsg > -1 && !vms.starting) {
+						ast_safe_sleep(chan,500);
 						cmd = advanced_options(chan, vmu, &vms, vms.curmsg, 3, record_gain);
 						if (cmd == ERROR_LOCK_PATH) {
 							res = cmd;
@@ -12450,6 +12452,7 @@ static int vm_execmain(struct ast_channel *chan, const char *data)
 					}
 					cmd = 't';
 					break;
+				/*
 				case '4': // Dialout
 					if (!ast_strlen_zero(vmu->dialout)) {
 						cmd = dialout(chan, vmu, NULL, vmu->dialout);
@@ -12482,6 +12485,7 @@ static int vm_execmain(struct ast_channel *chan, const char *data)
 					break;
 
 				default:
+					ast_safe_sleep(chan,500);
 					cmd = 0;
 					/*
 					if (!vms.starting) {
