From: Sipwise Development Team <support@sipwise.com>
Date: Tue, 6 Dec 2022 14:51:13 +0100
Subject: sipwise_vm_fix_compile_warnings

---
 Makefile             | 3 ++-
 apps/app_voicemail.c | 4 ++--
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/Makefile b/Makefile
index ad0c960..fc52c48 100644
--- a/Makefile
+++ b/Makefile
@@ -17,7 +17,8 @@ DEBUG=-g
 
 LIBS+=-lpcre
 CFLAGS+=-pipe -fPIC
-CFLAGS+=-Wall -Wextra -Wstrict-prototypes -Wmissing-prototypes -Wmissing-declarations
+CFLAGS+=-Wall -Wextra -Wstrict-prototypes -Wmissing-prototypes -Wmissing-declarations \
+		-Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable
 CFLAGS+=-D_REENTRANT -D_GNU_SOURCE -DODBC_STORAGE
 
 all: _all
diff --git a/apps/app_voicemail.c b/apps/app_voicemail.c
index efada50..b1c2407 100644
--- a/apps/app_voicemail.c
+++ b/apps/app_voicemail.c
@@ -5118,7 +5118,7 @@ static void prep_email_sub_vars(struct ast_channel *ast, struct ast_vm_user *vmu
 	}
 
 	if ((origtime = ast_variable_retrieve(msg_cfg, "message", "origtime")) && sscanf(origtime, "%30d", &inttime) == 1) {
-		struct timeval tv = { inttime, };
+		struct timeval tv = { inttime, 0 };
 		struct ast_tm tm;
 		ast_localtime(&tv, &tm, NULL);
 		ast_strftime_locale(origdate, sizeof(origdate), emaildateformat, &tm, S_OR(vmu->locale, NULL));
@@ -5519,7 +5519,7 @@ static void make_email_file(FILE *p,
 				/* You might be tempted to do origdate, except that a) it's in the wrong
 				 * format, and b) it's missing for IMAP recordings. */
 				if ((v = ast_variable_retrieve(msg_cfg, "message", "origtime")) && sscanf(v, "%30d", &inttime) == 1) {
-					struct timeval tv = { inttime, };
+					struct timeval tv = { inttime, 0 };
 					struct ast_tm tm;
 					ast_localtime(&tv, &tm, NULL);
 					ast_strftime_locale(origdate, sizeof(origdate), emaildateformat, &tm, S_OR(vmu->locale, NULL));
